/* @license GNU-GPL-2.0-or-later https://www.drupal.org/licensing/faq */
(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e;}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e;},e(t);}!function(t){t.behaviors.styled_google_maps={attach:function(o,n){var a,i,r,s=n.styled_google_map,l=[],p=function(o){var p=n.maps["id"+s[o]],d=p.id,c=document.getElementById(d);c&&function(){var d=p.locations,g=p.settings,u=new google.maps.LatLngBounds(),m={ROADMAP:google.maps.MapTypeId.ROADMAP,SATELLITE:google.maps.MapTypeId.SATELLITE,HYBRID:google.maps.MapTypeId.HYBRID,TERRAIN:google.maps.MapTypeId.TERRAIN},_=""!==g.style.style?g.style.style:"[]";c.style.width=p.settings.width,c.style.height=p.settings.height,g.draggable=document.documentElement.clientWidth>480?g.draggable:g.mobile_draggable;var h={gestureHandling:g.gestureHandling,zoom:parseInt(g.zoom.default),mapTypeId:m[g.style.maptype],disableDefaultUI:!g.ui,maxZoom:parseInt(g.zoom.max),minZoom:parseInt(g.zoom.min),styles:JSON.parse(_),mapTypeControl:g.maptypecontrol,scaleControl:g.scalecontrol,rotateControl:g.rotatecontrol,streetViewControl:g.streetviewcontrol,zoomControl:g.zoomcontrol,fullscreenControl:g.fullscreen,draggable:g.draggable},v=new google.maps.Map(c,h),y={};if(void 0!==g.heat_map&&g.heat_map.heatmap_enabled){for(var f=[],I=0;I<g.heat_map.data.length;I++){var w={location:new google.maps.LatLng(g.heat_map.data[I].lat,g.heat_map.data[I].lon),weight:g.heat_map.data[I].weight};f.push(w);}(y=new google.maps.visualization.HeatmapLayer({data:f,gradient:g.heat_map.gradient,opacity:g.heat_map.opacity,maxIntensity:g.heat_map.maxIntensity,dissipating:g.heat_map.dissipating,radius:g.heat_map.radius})).setMap(v);}else !function(){var e=new InfoBubble({shadowStyle:parseInt(g.popup.shadow_style),padding:parseInt(g.popup.padding),borderRadius:parseInt(g.popup.border_radius),borderWidth:parseInt(g.popup.border_width),borderColor:g.popup.border_color,backgroundColor:g.popup.background_color,minWidth:g.popup.min_width,maxWidth:g.popup.max_width,maxHeight:g.popup.min_height,minHeight:g.popup.max_height,arrowStyle:parseInt(g.popup.arrow_style),arrowSize:parseInt(g.popup.arrow_size),arrowPosition:parseInt(g.popup.arrow_position),disableAutoPan:parseInt(g.popup.disable_autopan),disableAnimation:parseInt(g.popup.disable_animation),hideCloseButton:parseInt(g.popup.hide_close_button),backgroundClassName:g.popup.classes.background});for(var t in void 0!==g.popup.close_button_source&&g.popup.close_button_source&&(e.close_.src=g.popup.close_button_source),e.contentContainer_.className=g.popup.classes.container,e.arrow_.className=g.popup.classes.arrow,e.arrowOuter_.className=g.popup.classes.arrow_outer,e.arrowInner_.className=g.popup.classes.arrow_inner,d){var o=d[t].pin;""!==g.style.pin_width&&""!==g.style.pin_height&&(o={url:d[t].pin,scaledSize:new google.maps.Size(g.style.pin_width,g.style.pin_height)}),void 0!==d[t].active_pin?(r=d[t].active_pin,""!==g.style.pin_width&&""!==g.style.pin_height&&(r={url:d[t].active_pin,scaledSize:new google.maps.Size(g.style.pin_width,g.style.pin_height)})):r=o;var n=new google.maps.Marker({position:new google.maps.LatLng(d[t].lat,d[t].lon),map:v,html:d[t].popup,label:d[t].marker_label,icon:o,original_icon:o,active_icon:r,category:d[t].category});if(l.push(n),d[t].popup){void 0!==g.popup.default_state&&1==g.popup.default_state&&0==t&&(e.setContent(n.html),e.bubble_.className="sgmpopup sgmpopup-"+n.category,n.setZIndex(1),n.setIcon(n.active_icon),e.open(v,n));var s=g.popup.open_event;google.maps.event.addListener(n,s,function(t){return function(){if(e.isOpen()&&1==g.popup.second_click&&this.getZIndex())e.close(t,this),this.setIcon(this.original_icon),this.setZIndex(0);else{e.setContent(this.html);for(var o=0;o<l.length;o++)l[o].setIcon(l[o].original_icon),e.bubble_.className="sgmpopup sgmpopup-"+l[o].category,l[o].setZIndex(0);this.setIcon(this.active_icon),this.setZIndex(1),e.open(t,this);}};}(v)),google.maps.event.addListener(n,"hover",(function(){this.setIcon(this.active_icon);}));}u.extend(n.getPosition());}if(i={},void 0!==g.cluster&&g.cluster.cluster_enabled){var p=[{textColor:g.cluster.text_color,url:g.cluster.pin_image,height:parseInt(g.cluster.height),width:parseInt(g.cluster.width),textSize:parseInt(g.cluster.text_size)}],c={gridSize:60,zoomOnClick:g.cluster.zoomOnClick,maxZoom:g.zoom.max-1,styles:p,minimumClusterSize:parseInt(g.cluster.min_size)};void 0!==g.cluster&&g.cluster.cluster_enabled&&(i=new MarkerClusterer(v,l,c)).setMaxZoom(c.maxZoom);}if(a={},void 0!==g.spider&&g.spider.spider_enabled){var m,_,h,y,f,I,w,b,S=new OverlappingMarkerSpiderfier(v,{markersWontMove:null===(m=g.spider.markers_wont_move)||void 0===m||m,markersWontHide:null===(_=g.spider.markers_wont_hide)||void 0===_||_,basicFormatEvents:null===(h=g.spider.basic_format_events)||void 0===h||h,keepSpiderfied:null===(y=g.spider.keep_spiderfied)||void 0===y||y,nearbyDistance:null!==(f=g.spider.nearby_distance)&&void 0!==f?f:25,spiralFootSeparation:null!==(I=g.spider.spiralFootSeparation)&&void 0!==I?I:28,spiralLengthStart:13,spiralLengthFactor:5,circleSpiralSwitchover:null!==(w=g.spider.circle_spiral_switchover)&&void 0!==w?w:7,circleFootSeparation:null!==(b=g.spider.circleFootSeparation)&&void 0!==b?b:18});l.forEach((function(e){S.trackMarker(e);})),S.addListener("spiderfy",(function(e){for(var t=0;t<e.length;t++)e[t].setIcon(e[t].original_icon),e[t].setZIndex(1);})),S.addListener("unspiderfy",(function(t){for(var o=0;o<t.length;o++)e.close();})),google.maps.event.addListener(v,"idle",(function(e){for(var t=S.markersNearAnyOtherMarker(),o=0;o<t.length;o++)t[o].setZIndex(0);})),google.maps.event.addListener(i,"clusterclick",(function(e){var t=e.getMarkers();google.maps.event.trigger(t,"spiderfy");})),google.maps.event.addListener(v,"dragend",(function(){google.maps.event.trigger(v,"click");}));}}();var b=c.closest(".view");if(b){var S=b.getElementsByClassName("google-map-control");if(S)for(var k=0;k<S.length;k++){var L=S[k].getAttribute("data-position"),z=S[k].getAttribute("id");v.controls[google.maps.ControlPosition[L]].push(document.getElementById(z));}}if(g.map_center&&g.map_center.center_coordinates){if(!isNaN(parseInt(g.map_center.center_coordinates.lat))&&!isNaN(parseInt(g.map_center.center_coordinates.lon))){var x=new google.maps.LatLng(g.map_center.center_coordinates.lat,g.map_center.center_coordinates.lon);u.extend(x),v.setCenter(x);}}else v.setCenter(u.getCenter());if(void 0!==g.directions&&g.directions.enabled){var E=new google.maps.DirectionsRenderer(),C=new google.maps.DirectionsService();if(E.setMap(v),g.directions.steps){var M="steps-"+s[o];E.setPanel(document.getElementById(M));}var B="find-directions-"+s[o],N="getting_directions_location-"+s[o];"https:"===document.location.protocol?(document.addEventListener("geolocation_error",(function(e){document.getElementById("directions"+s[o]).getElementsByClassName("error-message").item(0).textContent=e.code;})),document.getElementById(N).addEventListener("change",(function(){var e="getting_directions_address-"+s[o];if(this.checked){n.user_current_location=n.user_current_location||!1;var t=new GeolocationMarker(v);t&&(n.user_current_location=t,document.getElementById(e).style.display="none");}else document.getElementById(e).style.display="block";}))):document.getElementById(N).parentNode.style.display="none",document.getElementById(B).addEventListener("click",(function(){!function(o,n,a,i){var r=document.getElementById("getting_directions_mode-"+a).value,s=document.getElementById("getting_directions_address-"+a).value;document.getElementById("getting_directions_location-"+a).checked&&"object"===e(window.drupalSettings.user_current_location)&&"function"==typeof window.drupalSettings.user_current_location.getPosition&&(s=window.drupalSettings.user_current_location.getPosition()),o.route({origin:s,destination:{lat:i.lat,lng:i.lon},travelMode:google.maps.TravelMode[r]},(function(e,o){if("OK"===o)n.setDirections(e);else{var a=new t.Message(),i=t.t("Directions request failed due to @status",{"@status":o});void 0!==t.Message?a.add(i,{type:"error"}):window.alert(i);}}));}(C,E,s[o],d[0]);}));}google.maps.event.addListener(v,"zoom_changed",(function(){var e=google.maps.event.addListener(v,"bounds_changed",(function(t){this.getZoom()>parseInt(g.zoom.default)&&1==v.initialZoom&&this.setZoom(parseInt(g.zoom.default)-1),v.initialZoom=!1,google.maps.event.removeListener(e);}));})),v.initialZoom=!0,v.fitBounds(u),n.initialized_styles_google_maps=n.initialized_styles_google_maps||[],n.initialized_styles_google_maps[s[o]]={map:v,markers:l,cluster:i,spider:a,heatmap:y};}();};for(var d in s)p(d);n.styled_google_map=[];}};}(Drupal);})();;
